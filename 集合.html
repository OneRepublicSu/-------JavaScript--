<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      function Set() {
        this.dataStore = [];
        this.add = add;
        this.remove = remove;
        // this.size = size;
        this.union = union;
        this.contains = contains;
        this.intersect = intersect;
        // this.subset = subset;
        // this.difference = difference;
        this.show = show;
      }

      function add(data) {
        // 集合之中不允许拥有相同的元素
        if (this.dataStore.indexOf(data) < 0) {
          this.dataStore.push(data);
          return true;
        } else {
          return false;
        }
      }

      function contains(data) {
        if (this.dataStore.indexOf(data) >= 0) {
          return true;
        } else {
          return false;
        }
      }

      function union(set) {
        // 此处构造函数和参数一定不要重名，否则会造成混淆的问题
        var tempSet = new Set();
        for (var i = 0; i < this.dataStore.length; i++) {
          tempSet.add(this.dataStore[i]);
        }
        console.log(tempSet);
        for (var i = 0; i < set.dataStore.length; i++) {
          if (!tempSet.contains(set.dataStore[i])) {
            tempSet.add(set.dataStore[i]);
          }
        }
        return tempSet;
      }

      function intersect(set) {
        var tempSet = new Set();
        for (var i = 0; i < this.dataStore.length; i++) {
          if (set.contains(this.dataStore[i])) {
            tempSet.add(this.dataStore[i]);
          }
        }
        return tempSet;
      }

      function remove(data) {
        var pos = this.dataStore.indexOf(data);
        if (pos > -1) {
          this.dataStore.splice(pos, 1);
          return true;
        } else {
          return false;
        }
      }

      function show() {
        return this.dataStore;
      }

      var names = new Set();
      names.add("David");
      names.add("Jennifer");
      names.add("Chris");
      names.add("Raymond");

      console.log(names.show());

      if (names.add("Mike")) {
        console.log("Mike is add");
      }
      if (names.add("Mike")) {
        console.log("Mike already in set");
      }
      var removed = "Alisa";

      if (names.remove(removed)) {
        console.log(removed + " is removed");
      } else {
        console.log(removed + " is not in set");
      }

      var cis = new Set();
      cis.add("David");
      cis.add("Jennifer");
      cis.add("Chris");
      cis.add("hello");
      cis.add("hi");

    //   并集

      var it = new Set();
      it = cis.union(names);
      console.log(it.show());

    //   交集操作

      var dif = new Set();
      dif = cis.intersect(names);
      console.log(dif.show());
    </script>
  </body>
</html>
